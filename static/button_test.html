<!DOCTYPE html>
<html>
<head>
    <title>Button Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { margin: 5px; padding: 10px; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-left: 4px solid #007cba; }
        .error { border-left-color: #dc3232; }
    </style>
</head>
<body>
    <h1>Button Debug Test</h1>
    <p>Open browser console (F12) to see debug logs when clicking buttons.</p>

    <div>
        <button onclick="testStartNewSession()">ğŸ†• New Session</button>
        <button onclick="testClearAllSessions()">ğŸ§¹ Clear Sessions</button>
        <button onclick="testRefreshDocuments()">ğŸ”„ Refresh</button>
        <button onclick="testDeleteAllDocuments()">ğŸ—‘ï¸ Delete All</button>
    </div>

    <div id="logs"></div>

    <script>
        function log(message, isError = false) {
            const logs = document.getElementById('logs');
            const div = document.createElement('div');
            div.className = 'log' + (isError ? ' error' : '');
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            logs.appendChild(div);
            console.log(message);
        }

        // Test functions that mimic the real ones
        async function testStartNewSession() {
            log('ğŸ†• testStartNewSession function called');
            try {
                log('âœ… Function executed successfully');
            } catch (error) {
                log('âŒ Error: ' + error.message, true);
            }
        }

        async function testClearAllSessions() {
            log('ğŸ§¹ testClearAllSessions function called');
            try {
                const response = await fetch('/api/v1/chat/sessions', { method: 'DELETE' });
                log('ğŸ“¡ API response status: ' + response.status);
                if (response.ok) {
                    const result = await response.json();
                    log('âœ… API call successful: ' + result.message);
                } else {
                    log('âŒ API call failed: ' + response.status, true);
                }
            } catch (error) {
                log('âŒ Error: ' + error.message, true);
            }
        }

        async function testRefreshDocuments() {
            log('ğŸ”„ testRefreshDocuments function called');
            try {
                const response = await fetch('/api/v1/documents');
                log('ğŸ“¡ Documents API response status: ' + response.status);
                if (response.ok) {
                    const docs = await response.json();
                    log('âœ… Loaded ' + docs.length + ' documents');
                } else {
                    log('âŒ API call failed: ' + response.status, true);
                }
            } catch (error) {
                log('âŒ Error: ' + error.message, true);
            }
        }

        async function testDeleteAllDocuments() {
            log('ğŸ—‘ï¸ testDeleteAllDocuments function called');
            try {
                const response = await fetch('/api/v1/documents', { method: 'DELETE' });
                log('ğŸ“¡ API response status: ' + response.status);
                if (response.ok) {
                    const result = await response.json();
                    log('âœ… API call successful: ' + result.message);
                } else {
                    log('âŒ API call failed: ' + response.status, true);
                }
            } catch (error) {
                log('âŒ Error: ' + error.message, true);
            }
        }

        // Auto-test on load
        window.addEventListener('load', function() {
            log('ğŸš€ Page loaded - click buttons to test functionality');
        });
    </script>
</body>
</html>